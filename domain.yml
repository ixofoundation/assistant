version: "3.1"

intents:
  - greet
  - goodbye
  - affirm
  - deny
  - msgSend

actions:
- validate_msgSend_form
- action_msgSend_form_submit

responses:
  utter_greet_wallet:
  - text: Choose a transaction
    buttons:
    - title: Send
      payload: "/msgSend"
    - title: Transfer
      payload: "/msgTransfer"
    - title: Delegate
      payload: "/msgDelegate"
    - title: Receive
      payload: "/showAccount"

  utter_default:
  - text: I don't think I understand. Can you try providing more detail?
  - text: um, what did you just say to me?
  - text: beep, boop, don't understand

  utter_chitchat/thanks:
  - text: No problem!
  - text: I have no choice but to help you.
  - text: I try my best
  
  utter_chitchat/confirm_presence:
  - text: yep I'm here.
  - text: I'm still listening.
  
  utter_chitchat/capabilities:
  - text: I can help you make a transaction.
  
  utter_chitchat/mood_great:
  - text: Superb!
  - text: right on
  
  utter_chitchat/mood_unhappy:
  - text: sorry to hear that :(
  - text: ok can you be nice to me
  
  utter_chitchat/bot_challenge:
  - text: I'm a bot, and I have a lot to learn! IXOIXOIXO
  
  utter_chitchat/goodbye:
  - text: bye bye
  - text: c u l8er allig8er
  - text: I X O

  utter_goodbye:
  - text: bye bye
  - text: c u l8er allig8er
  - text: I X O
  
  utter_ask_survey_form_rating:
  - buttons:
    - payload: '1'
      title: '1'
    - payload: '2'
      title: '2'
    - payload: '3'
      title: '3'
    - payload: '4'
      title: '4'
    - payload: '5'
      title: '5'
    text: On a scale of 1-5, how would you rate your conversation today?
  utter_ask_survey_form_open_feedback:
  - text: Is there any other feedback you can provide?
  utter_survey_end:
  - text: Thank you for the feedback!
  utter_start_over:
  - text: Ok, let's start over.
  utter_open_feedback:
  - text: Here's your lovely feedback - {open_feedback}
  utter_ask_denom:
  - text: Which token would you like to {transaction_type}?
    buttons:
    - payload: IXO
      title: IXO
    - payload: atom
      title: atom
    - payload: xusd
      title: xusd
    - payload: regen
      title: regen
    - payload: bct
      title: bct
    - payload: SDC
      title: SDC
  utter_valid_denom:
  - text: Got it.
  utter_invalid_denom:
  - text: That denom {denom} value seems to be Invalid. Could you try again..
  utter_ask_amount:
  - text: What is the amount you would like to {transaction_type}?
  utter_invalid_amount:
    - text: That input does not seem right. Please try again
  utter_valid_amount:
    - text: Got that, you would like to {transaction_type} an amount of {amount}
  utter_ask_toAddress:
  - text: What is the account address to which you would like to Send {denom} tokens?
  utter_valid_toAddress:
  - text: Got it.
  utter_invalid_toAddress:
  - text: That address seems to be Invalid. Could you try again...
  utter_ask_memo:
  - text: What is the memo for this transaction?
  utter_valid_memo:
  - text: Adding memo {memo} for the transaction...
  utter_affirm_transaction:
  - text: Initiating new transaction of type {transaction_type} for an amount of {amount} {denom} tokens to account {toAddress}
    custom:
      response:
        trigger: proto_msg
        type: cosmos-sdk/MsgSend
        did: '{user_did}'
      data:
        value:
        - amount: '{amount}'
          denom: '{denom}'
        to_address: '{toAddress}'
        from_address: '{fromAddress}'

entities:
- transaction_type
- message_type
- open_feedback
- amount
- amount-of-money
- number
- denom
- toAddress
- memo
- fromAddress
- user_did
- chain-id

slots:
  fromAddress:
    type: any
    mappings:
    - type: from_entity
      entity: fromAddress
  user_did:
    type: any
    mappings:
    - type: from_entity
      entity: user_did
  chain-id:
    type: any
    mappings:
    - type: from_entity
      entity: chain-id
  transaction_type:
    type: any
    initial_value: Send
    mappings:
    - type: from_entity
      entity: transaction_type
  message_type:
    type: any
    initial_value: Send
    mappings:
    - type: from_entity
      entity: message_type
  open_feedback:
    type: any
    mappings:
    - type: from_entity
      entity: open_feedback
  amount:
    type: any
    mappings:
    - type: from_entity
      entity: amount-of-money
      conditions:
      - active_loop: msgSend_form
        requested_slot: amount
    - type: from_entity
      entity: amount
      conditions:
      - active_loop: msgSend_form
        requested_slot: amount
    - type: from_entity
      entity: number
      conditions:
      - active_loop: msgSend_form
        requested_slot: amount
  denom:
    type: any
    mappings:
    - type: from_text
      conditions:
      - active_loop: msgSend_form
        requested_slot: denom
  toAddress:
    type: any
    mappings:
    - type: from_text
      conditions:
      - active_loop: msgSend_form
        requested_slot: toAddress
  memo:
    type: any
    mappings:
    - type: from_text
      conditions:
      - active_loop: msgSend_form
        requested_slot: memo

forms:
  msgSend_form:
    required_slots:
      - amount
      - denom
      - toAddress
      - memo

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
